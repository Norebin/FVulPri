import csv
import time

import numpy as np
csv.field_size_limit(2147483647)
def chunk_csv(file1='exploit-type.csv', chunk_size=500):
    """
    输入csv文件、一片包含的数量（可自定义）

    """
    chunk = []  # 存放500个数据，每个是一行，dict格式
    id_list = []
    time_start = time.time()

    cnt = {'Dir. Trav.':0,'DoS':0,'Sql':0,'Exec Code':0,'Overflow':0,'Mem. Corr.':0,'Priv':0,'CSRF':0,'XSS':0,'Info':0,'Bypass':0,'Http R.Spl.':0,'File Inclusion':0,}
    filecnt = 0

    with open(file1, "r", newline="", encoding="utf-8") as csvfile:
        csvreader = csv.reader(csvfile)

        for row in csvreader:
            if row[1] == 'CVE ID':
                continue
            try:
                number = int(row[3])
                type = row[4]
                for index in cnt:
                    if index in type:
                        cnt[index] += number
            except Exception as e:
                continue

        print(cnt)

chunk_csv()